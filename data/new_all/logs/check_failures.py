import os
import pickle

inc_fail = {'1131', '1230', '1235', '1819', '1958', '1965', '1539', '1064', '1472', '1742', '1855', '1515', '1107', '1451', '1739', '1704', '1275', '1943', '1761', '1519', '1255', '1868', '1212', '1441', '1218', '1428', '1896', '1643', '1480', '1421', '1839', '1311', '1396', '1063', '1808', '1957', '1281', '1783', '1694', '1125', '1261', '1937', '1473', '1916', '1716', '1028', '1104', '1410', '1879', '1123', '1295', '1188', '1705', '1970', '1427', '1966', '1655', '1684', '1066', '1103', '1663', '1495', '1666', '1160', '1114', '1074', '1308', '1072', '1907', '1832', '1759', '2008', '1928', '1558', '1866', '1145', '1575', '1612', '1029', '1128', '1559', '1583', '1192', '1446', '1109', '2044', '1392', '1986', '1899', '1876', '1561', '1984', '1738', '1890', '1611', '1685', '1139', '1342', '1522', '1885', '1659', '1728', '1146', '1696', '1413', '1237', '1097', '1658', '1740', '1779', '1864', '1491', '1143', '1555', '1197', '1108', '1476', '1895', '1297', '1349', '1474', '1211', '1124', '1526', '1358', '2025', '1881', '1458', '1087', '1871', '1858', '1756', '1463', '1573', '1856', '1414', '1781', '1686', '1431', '1962', '1452', '1731', '1313', '1809', '1127', '1818', '1540', '1360', '1632', '1089', '1908', '1169', '1679', '2043', '1510', '1106', '1807', '1199', '1920', '1032', '1910', '1952', '1953', '1913', '2036', '1905', '1245', '1351', '1874', '1724', '1162', '1793', '1889', '1116', '1821', '1231', '1248', '1873', '1636', '1078', '1646', '1181', '1944', '1514', '1487', '1791', '1368', '1806', '1288', '1766', '1947', '1875', '1187', '1675', '1246', '1936', '1804', '1459', '1065', '1681', '1434', '1497', '2041', '1528', '1786', '1380', '1768', '1048', '1898', '1462', '1436', '1309', '1593', '1040', '1444', '1445', '1038', '1158', '2033', '1822', '1296', '1824', '1276', '1467', '1061', '1456', '1963', '1991', '1219', '1887', '1826', '1750', '1175', '1711', '1247', '1543', '1971', '1529', '1525', '1208', '1861', '1201', '1293', '1603', '1493', '1503', '1305', '1888', '1362', '1214', '1785', '1670', '1271', '1633', '2028', '1644', '1259', '1391', '1929', '1651', '1699', '1241', '2010', '1654', '1516', '1203', '1880', '1239', '1091', '1541', '1833', '2023', '1748', '1068', '1507', '1265', '1343', '1938', '1882', '1712', '1215', '1447', '1095', '1992', '1423', '1286', '1302', '1119', '1656', '1657', '1191', '1253', '1164', '1348', '1792', '1121', '1566', '1369', '1677', '1115', '1698', '1198', '1554', '2029', '1836', '2020', '1222', '1912', '2040', '1906', '1333', '1122', '1251', '1665', '1287', '1951', '1553', '1278', '1170', '1552', '1052', '1755', '1030', '2015', '1979', '1911', '1877', '1754', '1379', '1729', '1234', '1717', '1814', '1560', '1194', '1034', '1782', '1233', '1985', '1486', '1440', '1260', '2046', '1601', '1327', '1730', '1572', '1678', '1829', '1407', '1079', '2013', '1673', '1534', '1142', '1390', '1770', '1499', '1025', '1135', '1322', '1780', '1865', '1323', '1511', '1825', '1862', '2017', '2042', '1258', '1310', '1254', '2001', '1981', '1067', '1713', '1264', '1776', '1084', '1649', '1347', '1355', '1869', '1225', '1422', '1336', '1949', '1069', '1171', '1228', '1835', '1176', '1545', '1454', '1381', '1816', '1982', '1974', '1735', '1964', '1238', '1395', '1799', '1500', '1133', '1496', '1590', '1795', '1256', '1221', '1357', '1857', '1700', '1505', '1344', '1257', '1914', '1412', '1430', '1435', '1787', '1524', '1316', '1915', '1378', '1299', '1708', '1389', '1277', '1680', '1817', '1405', '2003', '1977', '1969', '1315', '1720', '1691', '1589', '1328', '1202', '1948', '1961', '1185', '1304', '1424', '1334', '1153', '1757', '1930', '1498', '1610', '1605', '1840', '1571', '1290', '1077', '1481', '1479', '2039', '1950', '1790', '1997', '1494', '1140', '1035', '1927', '1244', '1894', '1859', '1537', '1033', '1774', '1307', '2011', '1429', '1892', '1903', '1803', '1687', '1387', '2004', '1144', '1921', '1707', '1101', '1860', '1282', '1482', '1449', '2038', '1726', '1548', '1932', '1743', '1110', '1834', '1492', '1801', '1157', '1574', '1438', '1189', '1703', '1159', '1891', '1366', '1576', '1509', '1345', '1998', '1706', '1419', '1917', '1291', '1867', '1161', '1533', '1577', '1579', '1775', '1111', '1723', '1236', '1805', '1688', '1660', '1134', '1085', '1578', '1417', '1538', '1210', '1630', '1039', '1415', '1112', '1813', '1993', '1812', '1508', '1764', '1765', '1645', '1980', '1967', '2026', '1200', '1090', '1050', '1377', '1909', '1141', '1690', '1954'}
lex_fail = set()
all_fail = set()

lex_chunk = 'chunk5'
# with open('lexecutor/{}/success.pkl'.format(lex_chunk), 'rb') as lex_fail_file:
#     lex_fail = set(pickle.load(lex_fail_file))

total_len = 0
total_counter = 0
for file_name in os.listdir('../{}'.format(lex_chunk)):
    try:
        file_path = os.path.join('../{}'.format(lex_chunk), file_name)
        file = open(file_path)
        content = file.read()#.decode('ISO-8859-1')
        total_counter += 1
        total_len += len(content)
    except Exception as e:
        pass

fail_counter = 0
fail_len = 0
for file_name in os.listdir('../{}'.format(lex_chunk)):
    try:
        if file_name.split('.')[0].split('_')[-1] in lex_fail:
            file_path = os.path.join('../{}'.format(lex_chunk), file_name)
            file = open(file_path)
            content = file.read()#.decode('ISO-8859-1')
            fail_counter += 1
            fail_len += len(content)
    except Exception as e:
        pass

print('Average length: {}'.format(total_len/total_counter))
# print('Average fail length: {}'.format(fail_len/fail_counter))

# all_fail = inc_fail.intersection(lex_fail)
# print(inc_fail)
# print(lex_fail)
# print(all_fail)